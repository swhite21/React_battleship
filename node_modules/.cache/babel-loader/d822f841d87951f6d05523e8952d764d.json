{"ast":null,"code":"var _jsxFileName = \"/home/sebastian/Desktop/battleship/src/board.js\";\nimport React from 'react';\nimport { Container, Button } from 'react-bootstrap';\nimport SingleSquare from './singleSquare';\nimport PlaceShipsPopUp from './placeShipsPopup';\nimport InGameMenu from './ingamemenu.js';\nimport BattleMenu from './battlemenu.js';\n\nclass Board extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.playerReady = () => {\n      let _this$state = this.state,\n          player1 = _this$state.player1,\n          player2 = _this$state.player2,\n          currentPlayer = _this$state.currentPlayer;\n      let startBattleCheck = this.startBattleCheck;\n      let player = '';\n\n      if (currentPlayer == 1) {\n        player = player1;\n      } else if (currentPlayer == 2) {\n        player = player2;\n      }\n\n      player.readyUp = true;\n      this.setState({\n        player\n      });\n      console.log(\"\".concat(currentPlayer, \" ready up status is \").concat(player.readyUp));\n      startBattleCheck();\n    };\n\n    this.startBattleCheck = () => {\n      let _this$state2 = this.state,\n          player1 = _this$state2.player1,\n          player2 = _this$state2.player2,\n          placementMode = _this$state2.placementMode,\n          battleMode = _this$state2.battleMode;\n\n      if (player1.readyUp == true && player2.readyUp == true) {\n        this.setState({\n          placementMode: false\n        });\n        this.setState({\n          battleMode: true\n        });\n        console.log(\"Battelmode is \".concat(battleMode));\n      } else {\n        console.log(\"players not readied\");\n      }\n    };\n\n    this.onHoverHighlight = (index, boat) => {\n      let _this$state3 = this.state,\n          boardSpaces = _this$state3.boardSpaces,\n          destroyer = _this$state3.destroyer,\n          submarine = _this$state3.submarine,\n          smallBoat = _this$state3.smallBoat,\n          boatSelector = _this$state3.boatSelector,\n          shipList = _this$state3.shipList,\n          boatOut = _this$state3.boatOut;\n      let outofBounds = this.outofBounds,\n          outofBoundsReset = this.outofBoundsReset;\n      let boatLng = shipList[boatSelector][1].length;\n      console.log(shipList[boatSelector][1]);\n      let adjacentIndexes = [];\n\n      for (let i = 0; i < boatLng; i++) {\n        var num = i * 10;\n        adjacentIndexes.push(index - num);\n      }\n\n      adjacentIndexes.map(value => {\n        //prevents player for placing ships out of bounds\n        if (value >= 0 && value <= 99) {\n          document.getElementById(value).style.color = \"green\";\n\n          function returnColor() {\n            document.getElementById(value).style.color = \"\";\n          }\n\n          setTimeout(returnColor, 700);\n          outofBoundsReset();\n        } else {\n          outofBounds();\n          adjacentIndexes.map(value => {\n            if (value >= 0 && value <= 99) {\n              document.getElementById(value).style.color = \"red\";\n\n              function returnColor() {\n                document.getElementById(value).style.color = \"\";\n              }\n            }\n          });\n        }\n      });\n    };\n\n    this.powerUpChanger = currentPlayer => {\n      let _this$state4 = this.state,\n          player1 = _this$state4.player1,\n          player2 = _this$state4.player2,\n          powerUps = _this$state4.powerUps;\n\n      if (currentPlayer == 1) {\n        if (player1.powerup == powerUps.length - 1) {\n          player1.powerup = 0;\n          this.setState({\n            player1\n          });\n        } else {\n          player1.powerup = player1.powerup + 1;\n          this.setState({\n            player1\n          });\n        }\n      } else if (currentPlayer == 2) {\n        if (player2.powerup == powerUps.length - 1) {\n          player2.powerup = 0;\n          this.setState({\n            player2\n          });\n        } else {\n          player2.powerup = player2.powerup + 1;\n          this.setState({\n            player2\n          });\n        }\n      }\n    };\n\n    this.boatPlaced = () => {\n      let _this$state5 = this.state,\n          player1 = _this$state5.player1,\n          player2 = _this$state5.player2,\n          currentPlayer = _this$state5.currentPlayer;\n      let player = '';\n\n      if (currentPlayer == 1) {\n        player = player1;\n      } else if (currentPlayer == 2) {\n        player = player2;\n      }\n\n      let newNum = player.boatMap.map(value => {\n        if (value != \"\") {\n          return 1;\n        }\n      });\n      newNum = newNum.filter(value => {\n        return value >= 0;\n      });\n      let sum = newNum.reduce(add, 0);\n\n      function add(accumulator, a) {\n        return accumulator + a;\n      }\n\n      player.boatstoPlace = 3 - sum;\n      this.setState({\n        player\n      }); //color the boats by index\n\n      var x = document.getElementById(\"board\");\n      var y = x.getElementsByClassName(\"single-square\");\n      var i;\n\n      for (i = 0; i < y.length; i++) {\n        y[i].style.backgroundColor = \"#94aace\";\n      }\n\n      player.boatMap.map(value => {\n        value.map(value => {\n          document.getElementById(value).style.backgroundColor = \"green\";\n        });\n      });\n    };\n\n    this.placeBoat = clickedIndex => {\n      let _this$state6 = this.state,\n          player1 = _this$state6.player1,\n          player2 = _this$state6.player2,\n          boatSelector = _this$state6.boatSelector,\n          currentPlayer = _this$state6.currentPlayer,\n          shipList = _this$state6.shipList;\n      let boatPlaced = this.boatPlaced;\n      let player = '';\n\n      if (currentPlayer == 1) {\n        player = player1;\n      } else if (currentPlayer == 2) {\n        player = player2;\n      }\n\n      let boatLng = shipList[boatSelector][1].length;\n      let adjacentIndexes = [];\n\n      for (let i = 0; i < boatLng; i++) {\n        var num = i * 10;\n\n        if (clickedIndex - num >= 0) {\n          adjacentIndexes.push(clickedIndex - num);\n        } else {\n          adjacentIndexes = [];\n        }\n      }\n\n      player.boatMap[boatSelector] = adjacentIndexes;\n      this.setState({\n        player\n      });\n      boatPlaced();\n    };\n\n    this.checkBattleMode = () => {\n      let battleMode = this.state.battleMode;\n      return battleMode;\n    };\n\n    this.checkPlacementMode = () => {\n      let placementMode = this.state.placementMode;\n      return placementMode;\n    };\n\n    this.boatSelectorChange = () => {\n      let _this$state7 = this.state,\n          boatSelector = _this$state7.boatSelector,\n          shipList = _this$state7.shipList;\n\n      if (boatSelector < shipList.length - 1) {\n        this.setState({\n          boatSelector: boatSelector + 1\n        });\n      } else {\n        this.setState({\n          boatSelector: 0\n        });\n      }\n    };\n\n    this.fire = index => {\n      let _this$state8 = this.state,\n          currentPlayer = _this$state8.currentPlayer,\n          player1 = _this$state8.player1,\n          player2 = _this$state8.player2;\n      let player = '';\n      let opponent = '';\n\n      if (currentPlayer == 1) {\n        player = player1;\n        opponent = player2;\n      } else if (currentPlayer == 2) {\n        player = player2;\n        opponent = player1;\n      }\n\n      console.log(\"fired on index \".concat(index));\n      let currentPlayerBoats = [];\n      player.firedOn.push(index);\n      opponent.boatMap.map(value => {\n        value.map(value => {\n          currentPlayerBoats.push(value);\n        });\n      }); //player get a hit\n\n      if (currentPlayerBoats.includes(index)) {\n        player.hitLogger.push(index);\n        console.log(\"player hit!\");\n        document.getElementById(index).style.backgroundColor = \"red\";\n        player.powerUpMeter = player.powerUpMeter + 5;\n        this.setState({\n          player\n        });\n      } else {\n        player.firedOn.push(index);\n        this.setState({\n          player\n        });\n        document.getElementById(index).style.backgroundColor = \"grey\";\n      }\n\n      console.log($); //Changes players turn\n\n      if (currentPlayer == 1) {\n        this.setState({\n          currentPlayer: 2\n        });\n      } else if (currentPlayer == 2) {\n        this.setState({\n          currentPlayer: 1\n        });\n      } //clears board\n      //populates with player specific viewBox\n\n\n      var x = document.getElementById(\"board\");\n      var y = x.getElementsByClassName(\"single-square\");\n      var i;\n\n      for (i = 0; i < y.length; i++) {\n        if (opponent.firedOn.includes(i)) {\n          y[i].style.backgroundColor = \"grey\";\n        } else if (opponent.hitLogger.includes(i)) {\n          y[i].style.backgroundColor = \"red\";\n        } else {\n          y[i].style.backgroundColor = \"#94aace\";\n        }\n      } //raises powerup level a random amount between 1-10 every fire\n\n\n      this.powerUpLevel();\n    };\n\n    this.hitMarker = () => {};\n\n    this.scoreChanger = () => {};\n\n    this.powerUpLevel = () => {\n      let _this$state9 = this.state,\n          player1 = _this$state9.player1,\n          player2 = _this$state9.player2,\n          currentPlayer = _this$state9.currentPlayer;\n      let player = '';\n\n      if (currentPlayer == 1) {\n        player = player1;\n      } else if (currentPlayer == 2) {\n        player = player2;\n      } //FOR TESTING POWERUP METER\n\n\n      if (player.powerUpMeter < 99 && player.powerUpMeter != 0) {\n        player.powerUpMeter = player.powerUpMeter + Math.random() * 10;\n      } else {\n        player.powerUpMeter = 0;\n      }\n\n      this.setState({\n        player1\n      });\n    };\n\n    this.startGame = () => {\n      let _this$state10 = this.state,\n          boardSpaces = _this$state10.boardSpaces,\n          populatedBoard = _this$state10.populatedBoard,\n          squareStateColor = _this$state10.squareStateColor,\n          boatOut = _this$state10.boatOut;\n      let onHoverHighlight = this.onHoverHighlight,\n          placeBoat = this.placeBoat,\n          checkBattleMode = this.checkBattleMode,\n          checkPlacementMode = this.checkPlacementMode,\n          fire = this.fire;\n      let boardpop = boardSpaces.map(maphandler);\n      this.setState({\n        placementMode: true\n      });\n\n      function maphandler(value, index) {\n        return React.createElement(SingleSquare, {\n          value: value,\n          squareStateColor: squareStateColor,\n          onHoverHighlight: onHoverHighlight,\n          placeBoat: placeBoat,\n          boatOut: boatOut,\n          index: index,\n          checkPlacementMode: checkPlacementMode,\n          checkBattleMode: checkBattleMode,\n          fire: fire,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 307\n          },\n          __self: this\n        });\n      }\n\n      this.setState({\n        populatedBoard: boardpop\n      });\n    };\n\n    this.placmentPopUpHandler = () => {\n      let placeShipsShow = this.state.placeShipsShow;\n      this.setState({\n        placeShipsShow: false\n      });\n    };\n\n    this.outofBounds = () => {\n      let boatOut = this.state.boatOut;\n      this.setState({\n        boatOut: true\n      });\n    };\n\n    this.outofBoundsReset = () => {\n      let boatOut = this.state.boatOut;\n      this.setState({\n        boatOut: false\n      });\n    };\n\n    this.switchPlayer = () => {\n      let currentPlayer = this.state.currentPlayer;\n      let playerReady = this.playerReady;\n\n      if (currentPlayer == 1) {\n        document.getElementById('in-game-menu').style.cssFloat = \"right\";\n        this.setState({\n          currentPlayer: 2\n        });\n      } else if (currentPlayer == 2) {\n        document.getElementById('in-game-menu').style.cssFloat = \"left\";\n        this.setState({\n          currentPlayer: 1\n        });\n      }\n\n      var x = document.getElementById(\"board\");\n      var y = x.getElementsByClassName(\"single-square\");\n      var i;\n\n      for (i = 0; i < y.length; i++) {\n        y[i].style.backgroundColor = \"#94aace\";\n      }\n\n      playerReady();\n    };\n\n    this.state = {\n      boardSpaces: [\"1A\", \"2A\", \"3A\", \"4A\", \"5A\", \"6A\", \"7A\", \"8A\", \"9A\", \"10A\", \"1B\", \"2B\", \"3B\", \"4B\", \"5B\", \"6B\", \"7B\", \"8B\", \"9B\", \"10B\", \"1C\", \"2C\", \"3C\", \"4C\", \"5C\", \"6C\", \"7C\", \"8C\", \"9C\", \"10C\", \"1D\", \"2D\", \"3D\", \"4D\", \"5D\", \"6D\", \"7D\", \"8D\", \"9D\", \"10D\", \"1E\", \"2E\", \"3E\", \"4E\", \"5E\", \"6E\", \"7E\", \"8E\", \"9E\", \"10E\", \"1F\", \"2F\", \"3F\", \"4F\", \"5F\", \"6F\", \"7F\", \"8F\", \"9F\", \"10F\", \"1G\", \"2G\", \"3G\", \"4G\", \"5G\", \"6G\", \"7G\", \"8G\", \"9G\", \"10G\", \"1H\", \"2H\", \"3H\", \"4H\", \"5H\", \"6H\", \"7H\", \"8H\", \"9H\", \"10H\", \"1I\", \"2I\", \"3I\", \"4I\", \"5I\", \"6I\", \"7I\", \"8I\", \"9I\", \"10I\", \"1J\", \"2J\", \"3J\", \"4J\", \"5J\", \"6J\", \"7J\", \"8J\", \"9J\", \"10J\"],\n      powerUps: [\"Bomber\", \"Collision\", \"Radar\"],\n      populatedBoard: [React.createElement(\"singleSquare\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 25\n        },\n        __self: this\n      })],\n      player1: {\n        boatsleft: 3,\n        boatstoPlace: 3,\n        powerup: 0,\n        boatMap: [[], [], []],\n        readyUp: false,\n        powerUpMeter: 1,\n        firedOn: [],\n        hitLogger: []\n      },\n      player2: {\n        boatsleft: 3,\n        boatstoPlace: 3,\n        powerup: 0,\n        boatMap: [[], [], []],\n        readyUp: false,\n        powerUpMeter: 1,\n        firedOn: [],\n        hitLogger: []\n      },\n      boatSelector: 0,\n      shipList: [[\"destroyer\", [\"D\", \"D\", \"D\", \"D\", \"D\"]], [\"submarine\", [\"S\", \"S\", \"S\", \"S\"]], [\"smallBoat\", [\"B\", \"B\"]]],\n      //passed to each space to determine the squares state in color\n      //TEMPORARILY PLACED ON FALSE\n      placeShipsShow: true,\n      //TEMPORARILY PLACED ON TRUE\n      battleMode: false,\n      placementMode: true,\n      currentPlayer: 1,\n      boatOut: false\n    };\n  }\n\n  render() {\n    let _this$state11 = this.state,\n        powerUps = _this$state11.powerUps,\n        player1 = _this$state11.player1,\n        player2 = _this$state11.player2,\n        boatOut = _this$state11.boatOut,\n        placementMode = _this$state11.placementMode,\n        populatedBoard = _this$state11.populatedBoard,\n        placeShipsShow = _this$state11.placeShipsShow,\n        currentPlayer = _this$state11.currentPlayer,\n        shipList = _this$state11.shipList,\n        boatSelector = _this$state11.boatSelector;\n    let placmentPopUpHandler = this.placmentPopUpHandler,\n        startGame = this.startGame,\n        boatSelectorChange = this.boatSelectorChange,\n        onHoverHighlight = this.onHoverHighlight,\n        powerUpChanger = this.powerUpChanger,\n        switchPlayer = this.switchPlayer;\n    return React.createElement(\"div\", {\n      className: \"board-bg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.startBattleCheck,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357\n      },\n      __self: this\n    }, \" test\"), placementMode && React.createElement(InGameMenu, {\n      shipList: shipList,\n      powerUpChanger: powerUpChanger,\n      onHoverHighlight: onHoverHighlight,\n      currentPlayer: currentPlayer,\n      boatSelectorChange: boatSelectorChange,\n      boatSelector: boatSelector,\n      player1: player1,\n      player2: player2,\n      powerUps: powerUps,\n      switchPlayer: switchPlayer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358\n      },\n      __self: this\n    }), placeShipsShow && React.createElement(PlaceShipsPopUp, {\n      placmentPopUpHandler: placmentPopUpHandler,\n      currentPlayer: currentPlayer,\n      startGame: startGame,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 369\n      },\n      __self: this\n    }), boatOut && React.createElement(\"div\", {\n      className: \"alert alert-danger\",\n      id: \"out-of-bounds\",\n      role: \"alert\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 375\n      },\n      __self: this\n    }, \"Out of bounds\"), React.createElement(\"div\", {\n      id: \"board\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 376\n      },\n      __self: this\n    }, populatedBoard), !placementMode && React.createElement(BattleMenu, {\n      currentPlayer: currentPlayer,\n      player1: player1,\n      player2: player2,\n      powerUps: powerUps,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Board;","map":{"version":3,"sources":["/home/sebastian/Desktop/battleship/src/board.js"],"names":["React","Container","Button","SingleSquare","PlaceShipsPopUp","InGameMenu","BattleMenu","Board","Component","constructor","props","playerReady","state","player1","player2","currentPlayer","startBattleCheck","player","readyUp","setState","console","log","placementMode","battleMode","onHoverHighlight","index","boat","boardSpaces","destroyer","submarine","smallBoat","boatSelector","shipList","boatOut","outofBounds","outofBoundsReset","boatLng","length","adjacentIndexes","i","num","push","map","value","document","getElementById","style","color","returnColor","setTimeout","powerUpChanger","powerUps","powerup","boatPlaced","newNum","boatMap","filter","sum","reduce","add","accumulator","a","boatstoPlace","x","y","getElementsByClassName","backgroundColor","placeBoat","clickedIndex","checkBattleMode","checkPlacementMode","boatSelectorChange","fire","opponent","currentPlayerBoats","firedOn","includes","hitLogger","powerUpMeter","$","powerUpLevel","hitMarker","scoreChanger","Math","random","startGame","populatedBoard","squareStateColor","boardpop","maphandler","placmentPopUpHandler","placeShipsShow","switchPlayer","cssFloat","boatsleft","render"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {Container, Button} from 'react-bootstrap'\nimport SingleSquare from './singleSquare'\nimport PlaceShipsPopUp from './placeShipsPopup'\nimport InGameMenu from './ingamemenu.js'\nimport BattleMenu from './battlemenu.js'\n\n\nclass Board extends React.Component{\n  constructor(props){\n    super(props)\n    this.state={\n      boardSpaces:[ \"1A\",\"2A\",\"3A\",\"4A\",\"5A\",\"6A\",\"7A\",\"8A\",\"9A\",\"10A\",\n                    \"1B\",\"2B\",\"3B\",\"4B\",\"5B\",\"6B\",\"7B\",\"8B\",\"9B\",\"10B\",\n                    \"1C\",\"2C\",\"3C\",\"4C\",\"5C\",\"6C\",\"7C\",\"8C\",\"9C\",\"10C\",\n                    \"1D\",\"2D\",\"3D\",\"4D\",\"5D\",\"6D\",\"7D\",\"8D\",\"9D\",\"10D\",\n                    \"1E\",\"2E\",\"3E\",\"4E\",\"5E\",\"6E\",\"7E\",\"8E\",\"9E\",\"10E\",\n                    \"1F\",\"2F\",\"3F\",\"4F\",\"5F\",\"6F\",\"7F\",\"8F\",\"9F\",\"10F\",\n                    \"1G\",\"2G\",\"3G\",\"4G\",\"5G\",\"6G\",\"7G\",\"8G\",\"9G\",\"10G\",\n                    \"1H\",\"2H\",\"3H\",\"4H\",\"5H\",\"6H\",\"7H\",\"8H\",\"9H\",\"10H\",\n                    \"1I\",\"2I\",\"3I\",\"4I\",\"5I\",\"6I\",\"7I\",\"8I\",\"9I\",\"10I\",\n                    \"1J\",\"2J\",\"3J\",\"4J\",\"5J\",\"6J\",\"7J\",\"8J\",\"9J\",\"10J\"\n                  ],\n      powerUps: [\"Bomber\", \"Collision\", \"Radar\"],\n      populatedBoard: [<singleSquare />],\n      player1: {  boatsleft: 3,\n                  boatstoPlace: 3,\n                  powerup: 0,\n                  boatMap: [[],[],[]],\n                  readyUp: false,\n                  powerUpMeter: 1,\n                  firedOn: [],\n                  hitLogger: []\n                },\n      player2: {  boatsleft: 3,\n                  boatstoPlace: 3,\n                  powerup: 0,\n                  boatMap: [[],[],[]],\n                  readyUp: false,\n                  powerUpMeter: 1,\n                  firedOn: [],\n                  hitLogger: []\n                },\n      boatSelector: 0,\n      shipList: [[\"destroyer\",[\"D\",\"D\",\"D\",\"D\",\"D\"]], [\"submarine\",[\"S\",\"S\",\"S\",\"S\"]], [\"smallBoat\",[\"B\",\"B\"]]],\n    //passed to each space to determine the squares state in color\n    //TEMPORARILY PLACED ON FALSE\n      placeShipsShow: true,\n        //TEMPORARILY PLACED ON TRUE\n      battleMode:false,\n      placementMode: true,\n      currentPlayer: 1,\n      boatOut: false\n    }\n  }\n  playerReady = ()=>{\n    let{player1, player2, currentPlayer}=this.state\n    let{startBattleCheck}=this\n    let player = ''\n    if (currentPlayer == 1){\n      player = player1\n    }else if(currentPlayer == 2){\n      player = player2\n    }\n    player.readyUp = true\n    this.setState({player})\n    console.log(`${currentPlayer} ready up status is ${player.readyUp}`);\n    startBattleCheck()\n\n  }\n  startBattleCheck = ()=>{\n    let{player1, player2, placementMode, battleMode}=this.state\n    if(player1.readyUp == true && player2.readyUp == true){\n      this.setState({placementMode: false})\n      this.setState({battleMode: true})\n      console.log(`Battelmode is ${battleMode}`);\n    }else{\n      console.log(\"players not readied\");\n    }\n  }\n  onHoverHighlight = (index, boat)=>{\n    let{boardSpaces, destroyer, submarine, smallBoat, boatSelector, shipList, boatOut}=this.state\n    let{outofBounds, outofBoundsReset}=this\n    let boatLng = shipList[boatSelector][1].length\n    console.log(shipList[boatSelector][1]);\n    let adjacentIndexes = []\n\n      for(let i = 0; i < boatLng; i++){\n        var num = i*10\n        adjacentIndexes.push(index-num)\n      }\n\n      adjacentIndexes.map((value)=>{\n        //prevents player for placing ships out of bounds\n          if(value >= 0 && value <= 99){\n        document.getElementById(value).style.color = \"green\"\n        function returnColor(){\n          document.getElementById(value).style.color = \"\"\n        }\n        setTimeout(returnColor, 700)\n        outofBoundsReset()\n      }else{\n      outofBounds()\n        adjacentIndexes.map((value)=>{\n          if(value >= 0 && value <= 99){\n          document.getElementById(value).style.color = \"red\"\n          function returnColor(){\n            document.getElementById(value).style.color = \"\"\n          }}\n        })\n\n      }\n      })\n  }\n  powerUpChanger = (currentPlayer) =>{\n    let{player1, player2, powerUps}= this.state\n\n      if(currentPlayer == 1){\n        if(player1.powerup == powerUps.length-1){\n          player1.powerup = 0\n          this.setState({player1})\n        }else{\n        player1.powerup = player1.powerup +1\n        this.setState({player1})\n        }\n      }else if (currentPlayer == 2){\n        if(player2.powerup == powerUps.length-1){\n          player2.powerup = 0\n          this.setState({player2})\n        }else{\n        player2.powerup = player2.powerup +1\n        this.setState({player2})\n        }\n      }\n  }\n  boatPlaced=()=>{\n    let{player1, player2, currentPlayer}=this.state\n    let player = ''\n    if (currentPlayer == 1){\n      player = player1\n    }else if(currentPlayer == 2){\n      player = player2\n    }\n\n    let newNum = player.boatMap.map((value)=>{\n        if(value != \"\"){\n          return 1\n        }\n      })\n    newNum = newNum.filter((value)=>{\n      return value >= 0\n    })\n    let sum = newNum.reduce(add, 0)\n    function add(accumulator, a) {\n    return accumulator + a;\n    }\n    player.boatstoPlace = 3 -sum\n    this.setState({player})\n    //color the boats by index\n    var x = document.getElementById(\"board\");\n    var y = x.getElementsByClassName(\"single-square\");\n    var i;\n    for (i = 0; i < y.length; i++) {\n      y[i].style.backgroundColor = \"#94aace\";\n    }\n    player.boatMap.map((value)=>{\n      value.map((value)=>{\n        document.getElementById(value).style.backgroundColor= \"green\"\n      })\n    })\n  }\n\n  placeBoat =(clickedIndex)=>{\n  let{player1, player2, boatSelector, currentPlayer, shipList}=this.state\n  let{boatPlaced}=this\n\n  let player = ''\n  if (currentPlayer == 1){\n    player = player1\n  }else if(currentPlayer == 2){\n    player = player2\n  }\n\n  let boatLng = shipList[boatSelector][1].length\n  let adjacentIndexes = []\n\n    for(let i = 0; i < boatLng; i++){\n      var num = i*10\n      if(clickedIndex-num >= 0){\n      adjacentIndexes.push(clickedIndex-num)\n    }else{\n      adjacentIndexes = []\n    }\n  }\n  player.boatMap[boatSelector] = adjacentIndexes\n  this.setState({player})\n  boatPlaced()\n\n  }\n  checkBattleMode = ()=>{\n  let{battleMode}=this.state\n  return battleMode\n  }\n  checkPlacementMode = ()=>{\n  let{placementMode}=this.state\n  return placementMode\n  }\n\n\n  boatSelectorChange = ()=>{\n    let{boatSelector, shipList}=this.state\n      if (boatSelector < shipList.length - 1){\n      this.setState({boatSelector: boatSelector+1})\n    }else{\n      this.setState({boatSelector: 0})\n    }\n  }\n  fire = (index)=>{\n    let{currentPlayer, player1, player2}=this.state\n    let player = ''\n    let opponent = ''\n    if (currentPlayer == 1){\n      player = player1\n      opponent = player2\n    }else if(currentPlayer == 2){\n      player = player2\n      opponent = player1\n    }\n\n    console.log(`fired on index ${index}`);\n\n    let currentPlayerBoats = []\n    player.firedOn.push(index)\n      opponent.boatMap.map((value)=>{\n        value.map((value)=>{\n          currentPlayerBoats.push(value)\n        })\n      })\n    //player get a hit\n    if(currentPlayerBoats.includes(index)){\n      player.hitLogger.push(index)\n      console.log(\"player hit!\");\n      document.getElementById(index).style.backgroundColor = \"red\"\n      player.powerUpMeter = player.powerUpMeter + 5\n      this.setState({player})\n    }else{\n      player.firedOn.push(index)\n      this.setState({player})\n      document.getElementById(index).style.backgroundColor = \"grey\"\n    }\n    console.log($);\n\n\n    //Changes players turn\n    if (currentPlayer == 1) {\n      this.setState({currentPlayer: 2})\n\n    }else if(currentPlayer ==2){\n      this.setState({currentPlayer: 1})\n    }\n    //clears board\n\n    //populates with player specific viewBox\n    var x = document.getElementById(\"board\");\n    var y = x.getElementsByClassName(\"single-square\");\n    var i;\n    for (i = 0; i < y.length; i++) {\n      if(opponent.firedOn.includes(i)){\n          y[i].style.backgroundColor = \"grey\";\n      }else if(opponent.hitLogger.includes(i)){\n        y[i].style.backgroundColor = \"red\";\n      }else{\n      y[i].style.backgroundColor = \"#94aace\";\n      }\n\n    }\n    //raises powerup level a random amount between 1-10 every fire\n    this.powerUpLevel()\n\n  }\n  hitMarker =()=>{}\n  scoreChanger = ()=>{\n  }\n  powerUpLevel = ()=>{\n    let{player1, player2, currentPlayer}=this.state\n    let player = ''\n    if (currentPlayer == 1){\n      player = player1\n    }else if(currentPlayer == 2){\n      player = player2\n    }\n    //FOR TESTING POWERUP METER\n  if(player.powerUpMeter < 99 && player.powerUpMeter != 0){\n    player.powerUpMeter = player.powerUpMeter + Math.random()*10\n  }else{\n    player.powerUpMeter = 0\n  }\n\n    this.setState({player1})\n  }\n  startGame =()=>{\n    let{boardSpaces, populatedBoard, squareStateColor, boatOut}=this.state\n    let{onHoverHighlight, placeBoat, checkBattleMode, checkPlacementMode, fire}=this\n    let boardpop = boardSpaces.map(maphandler)\n    this.setState({placementMode:true})\n    function maphandler(value, index){\n      return <SingleSquare value={value}\n              squareStateColor={squareStateColor}\n              onHoverHighlight={onHoverHighlight}\n              placeBoat={placeBoat}\n              boatOut={boatOut}\n              index={index}\n              checkPlacementMode={checkPlacementMode}\n              checkBattleMode={checkBattleMode}\n              fire={fire}\n\n      />\n    }\n    this.setState({populatedBoard: boardpop})\n  }\n  placmentPopUpHandler =()=>{\n    let{placeShipsShow}=this.state\n    this.setState({placeShipsShow: false})\n  }\n  outofBounds =()=>{\n    let{boatOut}=this.state\n    this.setState({boatOut:true})\n  }\n  outofBoundsReset =()=>{\n    let{boatOut}=this.state\n    this.setState({boatOut:false})\n  }\n  switchPlayer = ()=>{\n    let{currentPlayer}=this.state\n    let{playerReady}=this\n    if (currentPlayer == 1) {\n      document.getElementById('in-game-menu').style.cssFloat = \"right\"\n      this.setState({currentPlayer: 2})\n    }else if(currentPlayer ==2){\n      document.getElementById('in-game-menu').style.cssFloat = \"left\"\n      this.setState({currentPlayer: 1})\n    }\n    var x = document.getElementById(\"board\");\n    var y = x.getElementsByClassName(\"single-square\");\n    var i;\n    for (i = 0; i < y.length; i++) {\n      y[i].style.backgroundColor = \"#94aace\";\n    }\n    playerReady()\n  }\n\n  render(){\n    let{powerUps, player1, player2, boatOut, placementMode, populatedBoard, placeShipsShow, currentPlayer, shipList, boatSelector}=this.state\n    let{placmentPopUpHandler, startGame, boatSelectorChange, onHoverHighlight, powerUpChanger, switchPlayer}=this\n    return(\n    <div className=\"board-bg\">\n    <button onClick={this.startBattleCheck}> test</button>\n      { placementMode &&<InGameMenu shipList={shipList}\n                powerUpChanger={powerUpChanger}\n                onHoverHighlight={onHoverHighlight}\n                currentPlayer={currentPlayer}\n                boatSelectorChange={boatSelectorChange}\n                boatSelector={boatSelector}\n                player1={player1}\n                player2={player2}\n                powerUps={powerUps}\n                switchPlayer={switchPlayer}\n      />}\n        {placeShipsShow && <PlaceShipsPopUp\n          placmentPopUpHandler={placmentPopUpHandler}\n          currentPlayer={currentPlayer}\n          startGame={startGame}\n          />\n        }\n        {boatOut && <div className=\"alert alert-danger\" id=\"out-of-bounds\" role=\"alert\">Out of bounds</div>}\n      <div id=\"board\">\n      {populatedBoard}\n      </div>\n      {!placementMode && <BattleMenu\n          currentPlayer={currentPlayer}\n          player1={player1}\n          player2={player2}\n          powerUps={powerUps}\n        />}\n    </div>\n  );\n  }\n\n}\nexport default Board\n"]},"metadata":{},"sourceType":"module"}